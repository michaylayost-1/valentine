<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Valentine‚Äôs Lockbox üíò</title>
  <style>
    :root{
      --bg1:#fff1f6;
      --bg2:#f7f7ff;
      --card:#ffffffcc;
      --stroke:#ffffff;
      --ink:#1f1f29;
      --muted:#5c5c72;
      --pink:#ff3b8d;
      --rose:#ff5fa0;
      --purple:#7a5cff;
      --good:#14b86a;
      --bad:#ff3b3b;
      --shadow: 0 18px 40px rgba(24, 15, 56, .12);
      --shadow2: 0 10px 26px rgba(24, 15, 56, .10);
      --r: 22px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: var(--sans);
      color: var(--ink);
      background:
        radial-gradient(900px 600px at 20% 10%, rgba(255,59,141,.22), transparent 60%),
        radial-gradient(800px 520px at 80% 0%, rgba(122,92,255,.18), transparent 60%),
        radial-gradient(700px 500px at 60% 90%, rgba(255,95,160,.18), transparent 55%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      min-height:100vh;
    }
    .wrap{
      max-width: 980px;
      margin: 0 auto;
      padding: 28px 18px 60px;
    }
    .hero{
      background: linear-gradient(135deg, rgba(255,255,255,.78), rgba(255,255,255,.55));
      border: 1px solid rgba(255,255,255,.65);
      border-radius: calc(var(--r) + 6px);
      box-shadow: var(--shadow);
      padding: 22px 22px 18px;
      position:relative;
      overflow:hidden;
    }
    .hero:before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(280px 180px at 10% 10%, rgba(255,59,141,.18), transparent 70%),
        radial-gradient(320px 200px at 90% 20%, rgba(122,92,255,.16), transparent 70%),
        radial-gradient(300px 200px at 70% 90%, rgba(255,95,160,.14), transparent 70%);
      pointer-events:none;
      filter: blur(1px);
    }
    .hero > *{position:relative}
    h1{
      margin:0 0 6px;
      font-size: clamp(26px, 3.2vw, 38px);
      letter-spacing: -0.02em;
      line-height:1.1;
    }
    .sub{
      margin:0;
      color: var(--muted);
      font-size: 15px;
      line-height:1.5;
      max-width: 70ch;
    }
    .codebar{
      margin-top: 16px;
      padding: 14px;
      background: rgba(255,255,255,.75);
      border: 1px solid rgba(255,255,255,.7);
      border-radius: 16px;
      box-shadow: var(--shadow2);
    }
    .codebarTop{
      display:flex;
      gap:12px;
      align-items:center;
      justify-content:space-between;
      flex-wrap:wrap;
      margin-bottom: 10px;
    }
    .pill{
      display:inline-flex;
      gap:8px;
      align-items:center;
      font-size: 13px;
      color: var(--muted);
      padding: 8px 12px;
      border-radius: 999px;
      background: rgba(255,59,141,.10);
      border: 1px solid rgba(255,59,141,.16);
      user-select:none;
    }
    .progress{
      font-family: var(--mono);
      font-size: 12px;
      color: var(--muted);
    }
    .segments{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }
    .seg{
      display:flex;
      align-items:center;
      gap:8px;
      background: rgba(255,255,255,.9);
      border: 1px solid rgba(31,31,41,.10);
      border-radius: 14px;
      padding: 10px 10px;
    }
    .seg label{
      font-size: 12px;
      color: var(--muted);
      width: 68px;
    }
    .seg input{
      width: 96px;
      padding: 10px 10px;
      border-radius: 12px;
      border: 1px solid rgba(31,31,41,.14);
      font-family: var(--mono);
      letter-spacing: .18em;
      text-transform: uppercase;
      outline:none;
      transition: .2s ease;
    }
    .seg input:focus{
      border-color: rgba(255,59,141,.55);
      box-shadow: 0 0 0 6px rgba(255,59,141,.10);
    }
    .seg .status{
      width: 26px;
      height: 26px;
      border-radius: 10px;
      display:grid;
      place-items:center;
      border: 1px solid rgba(31,31,41,.10);
      background: rgba(255,255,255,.9);
      font-size: 14px;
    }
    .ok{ border-color: rgba(20,184,106,.35)!important; box-shadow: 0 0 0 6px rgba(20,184,106,.12)!important;}
    .bad{ border-color: rgba(255,59,59,.40)!important; box-shadow: 0 0 0 6px rgba(255,59,59,.10)!important;}
    .status.ok{ background: rgba(20,184,106,.12); color: var(--good); }
    .status.bad{ background: rgba(255,59,59,.10); color: var(--bad); }
    .actions{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
      margin-top: 12px;
    }
    button{
      appearance:none;
      border:0;
      border-radius: 14px;
      padding: 10px 14px;
      background: linear-gradient(135deg, var(--pink), var(--purple));
      color: white;
      font-weight: 700;
      letter-spacing: .01em;
      cursor:pointer;
      box-shadow: 0 10px 20px rgba(122,92,255,.20);
      transition: transform .08s ease, filter .2s ease;
    }
    button:active{ transform: translateY(1px); }
    .ghost{
      background: rgba(255,255,255,.9);
      color: var(--ink);
      border: 1px solid rgba(31,31,41,.12);
      box-shadow: none;
      font-weight: 650;
    }
    .tiny{
      font-size: 12px;
      color: var(--muted);
    }

    .grid{
      display:grid;
      gap: 14px;
      margin-top: 16px;
    }
    @media (min-width: 860px){
      .grid{ grid-template-columns: 1fr 1fr; }
    }
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.86), rgba(255,255,255,.62));
      border: 1px solid rgba(255,255,255,.70);
      border-radius: var(--r);
      padding: 18px 18px 16px;
      box-shadow: var(--shadow2);
      overflow:hidden;
      position:relative;
    }
    .card:before{
      content:"";
      position:absolute;
      inset:-1px;
      background:
        radial-gradient(260px 160px at 15% 0%, rgba(255,59,141,.10), transparent 70%),
        radial-gradient(260px 160px at 100% 30%, rgba(122,92,255,.10), transparent 70%);
      pointer-events:none;
    }
    .card > *{ position:relative; }
    .kicker{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-bottom: 6px;
    }
    .tag{
      font-family: var(--mono);
      font-size: 12px;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(255,59,141,.10);
      border: 1px solid rgba(255,59,141,.14);
      color: rgba(255,59,141,.95);
      white-space:nowrap;
    }
    h2{
      margin: 4px 0 10px;
      font-size: 18px;
      letter-spacing: -0.01em;
    }
    .txt{ color: var(--muted); line-height:1.55; font-size: 14px; }
    .lines{
      margin: 10px 0 0;
      padding-left: 18px;
      color: var(--ink);
      line-height:1.55;
      font-size: 14px;
    }
    .lines li{ margin: 6px 0; }
    .mini{
      margin-top: 12px;
      padding: 12px;
      background: rgba(255,255,255,.75);
      border: 1px solid rgba(31,31,41,.08);
      border-radius: 16px;
    }
    .miniTitle{
      font-weight: 800;
      font-size: 13px;
      margin: 0 0 8px;
      letter-spacing: .01em;
      display:flex; gap:8px; align-items:center;
    }
    .wordle{
      margin-top: 10px;
      display:grid;
      gap: 10px;
    }
    .row{
      display:flex;
      gap:8px;
      align-items:center;
      flex-wrap:wrap;
    }
    .wordle input{
      width: 140px;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid rgba(31,31,41,.14);
      font-family: var(--mono);
      letter-spacing: .18em;
      text-transform: uppercase;
      outline:none;
    }
    .board{
      display:grid;
      gap: 8px;
    }
    .guessRow{
      display:flex;
      gap:8px;
      align-items:center;
      font-family: var(--mono);
      font-size: 13px;
      color: var(--muted);
    }
    .sq{
      width: 18px; height: 18px;
      border-radius: 5px;
      border: 1px solid rgba(31,31,41,.16);
      display:inline-block;
    }
    .b{ background: rgba(31,31,41,.10); }
    .y{ background: rgba(255,211,77,.45); border-color: rgba(255,211,77,.60); }
    .g{ background: rgba(20,184,106,.38); border-color: rgba(20,184,106,.55); }
    .hintPop{
      display:none;
      margin-top: 10px;
      padding: 12px 12px;
      border-radius: 16px;
      border: 1px solid rgba(255,59,141,.22);
      background: rgba(255,59,141,.10);
      color: rgba(255,59,141,.98);
      font-weight: 750;
    }
    .unlock{
      margin-top: 16px;
      display:none;
      background: linear-gradient(180deg, rgba(255,255,255,.90), rgba(255,255,255,.70));
      border: 1px solid rgba(255,255,255,.75);
      border-radius: calc(var(--r) + 6px);
      box-shadow: var(--shadow);
      padding: 18px;
      position:relative;
      overflow:hidden;
    }
    .unlock:before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(360px 220px at 20% 10%, rgba(255,59,141,.18), transparent 70%),
        radial-gradient(360px 220px at 85% 30%, rgba(122,92,255,.16), transparent 70%);
      pointer-events:none;
    }
    .unlock > *{position:relative}
    .poem{
      white-space:pre-wrap;
      font-size: 15px;
      line-height:1.7;
      background: rgba(255,255,255,.78);
      border: 1px solid rgba(31,31,41,.08);
      border-radius: 16px;
      padding: 14px;
      margin-top: 10px;
    }
    .toast{
      position: fixed;
      bottom: 18px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(31,31,41,.92);
      color: white;
      padding: 10px 12px;
      border-radius: 14px;
      font-size: 13px;
      opacity:0;
      pointer-events:none;
      transition: .25s ease;
    }
    .toast.show{ opacity: 1; }
    .footer{
      margin-top: 16px;
      color: rgba(92,92,114,.9);
      font-size: 12px;
      text-align:center;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <section class="hero">
      <h1>Valentine‚Äôs Lockbox üíò</h1>
      <p class="sub">Solve each puzzle to earn a 3-letter code chunk. As you go, type each chunk into the boxes below. When they‚Äôre all correct‚Ä¶ your final surprise unlocks.</p>

      <div class="codebar" aria-label="Code progress">
        <div class="codebarTop">
          <div class="pill">üîí 5 locks ‚Ä¢ 1 poem</div>
          <div class="progress"><span id="progressText">0/5 unlocked</span></div>
        </div>

        <div class="segments">
          <div class="seg">
            <label for="c1">Puzzle 1</label>
            <input id="c1" maxlength="3" placeholder="___" autocomplete="off" />
            <div class="status" id="s1">‚Ä¢</div>
          </div>
          <div class="seg">
            <label for="c2">Puzzle 2</label>
            <input id="c2" maxlength="3" placeholder="___" autocomplete="off" />
            <div class="status" id="s2">‚Ä¢</div>
          </div>
          <div class="seg">
            <label for="c3">Puzzle 3</label>
            <input id="c3" maxlength="3" placeholder="___" autocomplete="off" />
            <div class="status" id="s3">‚Ä¢</div>
          </div>
          <div class="seg">
            <label for="c4">Puzzle 4</label>
            <input id="c4" maxlength="3" placeholder="___" autocomplete="off" />
            <div class="status" id="s4">‚Ä¢</div>
          </div>
          <div class="seg">
            <label for="c5">Puzzle 5</label>
            <input id="c5" maxlength="3" placeholder="___" autocomplete="off" />
            <div class="status" id="s5">‚Ä¢</div>
          </div>
        </div>

        <div class="actions">
          <button class="ghost" id="copyFinal" type="button">Copy full code</button>
          <span class="tiny">Tip: codes are not case-sensitive.</span>
        </div>
      </div>
    </section>

    <section class="grid" aria-label="Puzzles">

      <!-- Puzzle 1 -->
      <article class="card">
        <div class="kicker">
          <h2>üîê Puzzle 1 ‚Äî Memory Lock</h2>
          <span class="tag">CODE ‚Üí KPN</span>
        </div>
        <p class="txt">Solve the three memories. Take the first letter of each answer, in order.</p>

        <div class="mini">
          <p class="miniTitle">Memory 1</p>
          <ul class="lines">
            <li>Where you wore the shirt I still think about.</li>
            <li>The place you made me beg.</li>
            <li>Talking with friends but could only think of you.</li>
          </ul>
        </div>

        <div class="mini">
          <p class="miniTitle">Memory 2</p>
          <ul class="lines">
            <li>The place where we all survived.</li>
            <li>You flipped for me, then I fell for you.</li>
            <li>Your cinematography debut deserved an award.</li>
          </ul>
        </div>

        <div class="mini">
          <p class="miniTitle">Memory 3</p>
          <ul class="lines">
            <li>The song that follows us across cities.</li>
            <li>The first thing I heard when I walked through your door.</li>
            <li>The melody that made every goodbye softer.</li>
          </ul>
        </div>
      </article>

      <!-- Puzzle 2 -->
      <article class="card">
        <div class="kicker">
          <h2>üîê Puzzle 2 ‚Äî You Already Heard This One</h2>
          <span class="tag">CODE ‚Üí KHE</span>
        </div>
        <p class="txt">You already heard this one. Go back to these three audio messages, then jump to the correct second using the clue. Take the first letter of the word spoken at that moment.</p>
        <ul class="lines">
          <li>Saturday 2/7 ‚Äî 10:54 PM</li>
          <li>Sunday 2/8 ‚Äî 8:47 PM</li>
          <li>Thursday 2/12 ‚Äî 9:02 PM</li>
        </ul>

        <div class="mini">
          <p class="miniTitle">Audio 1</p>
          <p class="txt" style="margin:0">The number of letters in the city where we first met.</p>
        </div>
        <div class="mini">
          <p class="miniTitle">Audio 2</p>
          <p class="txt" style="margin:0">The number of hours in half a day‚Ä¶ plus one. (Because you‚Äôre the only one for me.)</p>
        </div>
        <div class="mini">
          <p class="miniTitle">Audio 3</p>
          <p class="txt" style="margin:0">The age of my brother.</p>
        </div>
      </article>

      <!-- Puzzle 3 -->
      <article class="card">
        <div class="kicker">
          <h2>üîê Puzzle 3 ‚Äî Wordle</h2>
          <span class="tag">CODE ‚Üí BBY</span>
        </div>
        <p class="txt">Solve the 5-letter word. Then take the last three letters as the code chunk.</p>

        <div class="mini">
          <p class="miniTitle">Wordle Board</p>
          <div class="board" aria-label="Wordle clues">
            <div class="guessRow">
              <span>GUESS 1:</span><span style="width:70px">AUDIO</span>
              <span class="sq b"></span><span class="sq y"></span><span class="sq b"></span><span class="sq b"></span><span class="sq b"></span>
            </div>
            <div class="guessRow">
              <span>GUESS 2:</span><span style="width:70px">HONEY</span>
              <span class="sq g"></span><span class="sq b"></span><span class="sq b"></span><span class="sq b"></span><span class="sq g"></span>
            </div>
            <div class="guessRow">
              <span>GUESS 3:</span><span style="width:70px">HUMID</span>
              <span class="sq g"></span><span class="sq g"></span><span class="sq b"></span><span class="sq b"></span><span class="sq b"></span>
            </div>
            <div class="guessRow">
              <span>GUESS 4:</span><span style="width:70px">HURRY</span>
              <span class="sq g"></span><span class="sq g"></span><span class="sq b"></span><span class="sq b"></span><span class="sq g"></span>
            </div>
          </div>

          <div class="wordle">
            <div class="row">
              <input id="wordleGuess" maxlength="5" placeholder="TYPE GUESS" autocomplete="off"/>
              <button id="wordleSubmit" type="button">Submit</button>
              <span class="tiny" id="wordleTries">0/5 tries</span>
            </div>
            <div class="hintPop" id="wordleHint">It‚Äôs what you are to me.</div>
            <div class="tiny" id="wordleResult"></div>
          </div>
        </div>
      </article>

      <!-- Puzzle 4 -->
      <article class="card">
        <div class="kicker">
          <h2>üîê Puzzle 4 ‚Äî Follow the Compass</h2>
          <span class="tag">CODE ‚Üí ILY</span>
        </div>
        <p class="txt">Some answers require direction. Think like a compass. For each selfie, use the riddle to choose North / South / East, then take the letter hidden in that direction.</p>

        <ul class="lines">
          <li>Selfie from <strong>[DATE/TIME 1]</strong></li>
          <li>Selfie from <strong>[DATE/TIME 2]</strong></li>
          <li>Selfie from <strong>[DATE/TIME 3]</strong></li>
        </ul>

        <div class="mini">
          <p class="miniTitle">Selfie 1 ‚Üí NORTH</p>
          <ul class="lines">
            <li>Longer coats, earlier sunsets.</li>
            <li>Maps trust me.</li>
            <li>Where winter shows up first.</li>
          </ul>
        </div>

        <div class="mini">
          <p class="miniTitle">Selfie 2 ‚Üí SOUTH</p>
          <ul class="lines">
            <li>Starting to heat up.</li>
            <li>The direction where latitude gets smaller.</li>
            <li>Where snowbirds go in January.</li>
          </ul>
        </div>

        <div class="mini">
          <p class="miniTitle">Selfie 3 ‚Üí EAST</p>
          <ul class="lines">
            <li>Go the way time zones advance (your clock jumps forward).</li>
            <li>On my way to see you.</li>
            <li>It‚Äôs the direction where new calendar days arrive first.</li>
          </ul>
        </div>
      </article>

      <!-- Puzzle 5 -->
      <article class="card">
        <div class="kicker">
          <h2>üîê Puzzle 5 ‚Äî Logic Trio</h2>
          <span class="tag">CODE ‚Üí NFT</span>
        </div>
        <p class="txt">Solve each riddle, then take the first letter of the number spelled out (e.g., Nine hundred ‚Üí N).</p>

        <div class="mini">
          <p class="miniTitle">1) The weight riddle</p>
          <p class="txt" style="margin:0 0 8px">Three animals are weighed in pairs:</p>
          <ul class="lines">
            <li>Elephant + 2 crocodiles = 1,200 kg</li>
            <li>2 crocodiles + 4 monkeys = 400 kg</li>
            <li>Elephant + 4 monkeys = 1,000 kg</li>
          </ul>
          <p class="txt" style="margin:8px 0 0">What is the weight of the elephant?</p>
        </div>

        <div class="mini">
          <p class="miniTitle">2) The farm puzzle</p>
          <p class="txt" style="margin:0">On a farm there are ducks and cows. There are 18 legs and 7 heads total. How many ducks are there?</p>
        </div>

        <div class="mini">
          <p class="miniTitle">3) The fish riddle</p>
          <p class="txt" style="margin:0">A fish‚Äôs head is 3 cm. Its tail is the same length as the head plus half the body. The body is as long as the head and tail together. How long is the fish?</p>
        </div>
      </article>

    </section>

    <!-- Unlock -->
    <section class="unlock" id="unlockSection" aria-label="Unlocked poem">
      <h2>üíå Unlocked</h2>
      <p class="txt">You did it. Here‚Äôs the final surprise.</p>
      <div class="poem" id="poemBox">
PASTE YOUR POEM HERE TOMORROW üíò

(You can edit this text directly in the HTML file.)
      </div>
    </section>

    <div class="footer">Made with love ‚Ä¢ Happy Valentine‚Äôs Day üíò</div>
  </div>

  <div class="toast" id="toast">Copied!</div>

  <script>
    // ====== EDIT THESE IF YOU CHANGE ANY CODES ======
    const ANSWERS = {
      c1: "KPN",
      c2: "KHE",
      c3: "BBY",
      c4: "ILY",
      c5: "NFT"
    };

    // ====== Code input validation (green/red flash) ======
    const inputs = ["c1","c2","c3","c4","c5"].map(id => document.getElementById(id));
    const statuses = {
      c1: document.getElementById("s1"),
      c2: document.getElementById("s2"),
      c3: document.getElementById("s3"),
      c4: document.getElementById("s4"),
      c5: document.getElementById("s5"),
    };
    const progressText = document.getElementById("progressText");
    const unlockSection = document.getElementById("unlockSection");

    function normalize(v){
      return (v || "").toUpperCase().replace(/[^A-Z]/g, "").slice(0,3);
    }

    function setStatus(id, state){
      const input = document.getElementById(id);
      const st = statuses[id];
      input.classList.remove("ok","bad");
      st.classList.remove("ok","bad");
      if(state === "ok"){
        input.classList.add("ok");
        st.classList.add("ok");
        st.textContent = "‚úì";
      } else if(state === "bad"){
        input.classList.add("bad");
        st.classList.add("bad");
        st.textContent = "‚úï";
      } else {
        st.textContent = "‚Ä¢";
      }
    }

    function recompute(){
      let correct = 0;
      for(const id of Object.keys(ANSWERS)){
        const input = document.getElementById(id);
        const val = normalize(input.value);
        input.value = val;
        if(val.length === 3){
          if(val === ANSWERS[id]){
            setStatus(id,"ok");
            correct++;
          } else {
            setStatus(id,"bad");
          }
        } else {
          setStatus(id,null);
        }
      }
      progressText.textContent = `${correct}/5 unlocked`;
      unlockSection.style.display = (correct === 5) ? "block" : "none";
    }

    inputs.forEach(inp => {
      inp.addEventListener("input", recompute);
      inp.addEventListener("blur", recompute);
    });

    // Copy full code
    const toast = document.getElementById("toast");
    function showToast(msg="Copied!"){
      toast.textContent = msg;
      toast.classList.add("show");
      setTimeout(()=>toast.classList.remove("show"), 1200);
    }

    document.getElementById("copyFinal").addEventListener("click", async () => {
      const full = `${normalize(c1.value)}-${normalize(c2.value)}-${normalize(c3.value)}-${normalize(c4.value)}-${normalize(c5.value)}`;
      try{
        await navigator.clipboard.writeText(full);
        showToast("Copied full code!");
      }catch(e){
        showToast("Copy not supported here");
      }
    });

    // ====== Wordle mini-game (solves HUBBY -> sets BBY) ======
    const WORD = "HUBBY";
    let tries = 0;
    const maxTries = 5;
    const guessInput = document.getElementById("wordleGuess");
    const submitBtn = document.getElementById("wordleSubmit");
    const triesLabel = document.getElementById("wordleTries");
    const hintPop = document.getElementById("wordleHint");
    const result = document.getElementById("wordleResult");
    const code3 = document.getElementById("c3");

    function setWordleHint(show){
      hintPop.style.display = show ? "block" : "none";
    }

    function finishWordle(){
      // last three letters of HUBBY => BBY
      code3.value = "BBY";
      recompute();
    }

    submitBtn.addEventListener("click", () => {
      const g = (guessInput.value || "").toUpperCase().replace(/[^A-Z]/g, "").slice(0,5);
      guessInput.value = g;
      if(g.length !== 5) return;

      tries++;
      triesLabel.textContent = `${tries}/${maxTries} tries`;

      if(g === WORD){
        result.textContent = "‚úÖ Nice. Now take the last three letters.";
        finishWordle();
        guessInput.disabled = true;
        submitBtn.disabled = true;
        setWordleHint(false);
        return;
      }

      // After 4 wrong tries, show the hint
      if(tries >= 4){
        setWordleHint(true);
      }

      if(tries >= maxTries){
        result.textContent = "Last try used ‚Äî read the hint and try again tomorrow üòâ";
        // don't lock them out completely; keep input active
      } else {
        result.textContent = "Not quite ‚Äî try again.";
      }
      guessInput.select();
    });

    guessInput.addEventListener("keydown", (e) => {
      if(e.key === "Enter") submitBtn.click();
    });

    // Initial compute
    recompute();
  </script>
</body>
</html>
